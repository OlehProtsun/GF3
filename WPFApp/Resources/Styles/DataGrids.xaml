<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:conv="clr-namespace:WPFApp.Converters">

    <conv:ScheduleMatrixCellBrushConverter x:Key="ScheduleMatrixCellBackgroundConverter" Kind="Background" />
    <conv:ScheduleMatrixCellBrushConverter x:Key="ScheduleMatrixCellForegroundConverter" Kind="Foreground" />
    <conv:ScheduleMatrixCellReferenceConverter x:Key="ScheduleMatrixCellReferenceConverter" />
    <conv:DataRowViewBoolColumnConverter x:Key="DataRowViewBoolColumnConverter" />
    <conv:ScheduleMatrixEmployeeTotalHoursConverter x:Key="ScheduleMatrixEmployeeTotalHoursConverter" />


    <!-- Спільний компактний cell style для матриці (щоб не дублювати в _NoTotals і звичайній). -->
    <Style x:Key="ScheduleMatrixCompactCellStyle" TargetType="DataGridCell">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
    </Style>

    <!-- Header style for Binds grid -->
    <Style x:Key="BindsGridColumnHeaderCenteredStyle" TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="FontFamily" Value="{StaticResource DefaultFontFamily}" />
        <Setter Property="FontSize" Value="13" />
        <Setter Property="Foreground" Value="Black" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderBrush" Value="#FFD9D9D9" />
        <Setter Property="BorderThickness" Value="0,0,0,1" />
        <Setter Property="Padding" Value="4,0" />
    </Style>

    <!-- Cell style for Binds grid with inset row separator.
         Сепаратор вимикаємо для колонки Active (DisplayIndex=3), щоб чекбокс-колонка виглядала чисто. -->
    <Style x:Key="BindsGridCellStyleWithRowSeparator" TargetType="{x:Type DataGridCell}">
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Padding" Value="12,0" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="HorizontalAlignment" Value="Stretch" />

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type DataGridCell}">
                    <Grid SnapsToDevicePixels="True">
                        <Border Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter VerticalAlignment="Center" />
                        </Border>

                        <Border x:Name="HorizontalSep"
                                VerticalAlignment="Bottom"
                                Height="1"
                                Margin="8,0,8,0"
                                Background="#FFD9D9D9" />
                    </Grid>

                    <ControlTemplate.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Column.DisplayIndex}" Value="3">
                            <Setter TargetName="HorizontalSep" Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>





    <Style x:Key="AvailabilityBaseGridStyle" TargetType="DataGrid">
        <Setter Property="AutoGenerateColumns" Value="True" />
        <Setter Property="IsReadOnly" Value="False" />
        <Setter Property="SelectionUnit" Value="FullRow" />
        <Setter Property="SelectionMode" Value="Single" />
        <Setter Property="CanUserAddRows" Value="False" />
        <Setter Property="CanUserDeleteRows" Value="False" />
        <Setter Property="CanUserResizeRows" Value="False" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="GridLinesVisibility" Value="None" />
        <Setter Property="Background" Value="Gainsboro" />

        <Setter Property="ColumnHeaderHeight" Value="36" />
        <Setter Property="ColumnHeaderStyle">
            <Setter.Value>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
                    <Setter Property="Foreground" Value="Black" />
                    <Setter Property="FontFamily" Value="{DynamicResource DefaultFontFamily}" />
                    <Setter Property="FontSize" Value="{DynamicResource FontSizeSmall}" />
                    <Setter Property="BorderThickness" Value="0" />
                </Style>
            </Setter.Value>
        </Setter>

        <Setter Property="RowStyle">
            <Setter.Value>
                <Style TargetType="DataGridRow">
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Height" Value="52" />
                    <Setter Property="FontFamily" Value="{DynamicResource DefaultFontFamily}" />
                    <Setter Property="FontSize" Value="{DynamicResource FontSizeMedium}" />
                    <Setter Property="Background" Value="{DynamicResource SurfaceBrush}" />
                    <Setter Property="Margin" Value="0,0,0,0" />

                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="DataGridRow">
                                <Border x:Name="RowBorder"
                                        Background="{TemplateBinding Background}"
                                        CornerRadius="12"
                                        Padding="0"
                                        Margin="0,0,0,0">
                                    <DataGridCellsPresenter />
                                </Border>

                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter TargetName="RowBorder" Property="Background" Value="{DynamicResource AccentBrush}" />
                                        <Setter Property="Foreground" Value="White" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>

        <Setter Property="CellStyle">
            <Setter.Value>
                <Style TargetType="DataGridCell">
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Background" Value="Transparent" />
                    <Setter Property="Padding" Value="12,0" />
                    <Setter Property="VerticalAlignment" Value="Center" />
                    <Setter Property="HorizontalAlignment" Value="Stretch" />

                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="DataGridCell">
                                <Border Background="{TemplateBinding Background}"
                                        Padding="{TemplateBinding Padding}"
                                        SnapsToDevicePixels="True">
                                    <ContentPresenter VerticalAlignment="Center" />
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="AvailabilityListCardGridBaseStyle" TargetType="DataGrid" BasedOn="{StaticResource AvailabilityBaseGridStyle}">
        <Setter Property="AutoGenerateColumns" Value="False" />
        <Setter Property="HeadersVisibility" Value="None" />
        <Setter Property="RowHeaderWidth" Value="0" />
        <Setter Property="SelectionUnit" Value="FullRow" />
        <Setter Property="SelectionMode" Value="Single" />
        <Setter Property="CanUserAddRows" Value="False" />
        <Setter Property="CanUserDeleteRows" Value="False" />
        <Setter Property="CanUserResizeRows" Value="False" />
        <Setter Property="RowHeight" Value="52" />
        <Setter Property="GridLinesVisibility" Value="None" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
    </Style>

    <Style x:Key="BindsGridStyle" TargetType="DataGrid" BasedOn="{StaticResource AvailabilityBaseGridStyle}">
        <Setter Property="AutoGenerateColumns" Value="False" />
        <Setter Property="HeadersVisibility" Value="Column" />
        <Setter Property="ColumnHeaderHeight" Value="30" />
        <Setter Property="ColumnHeaderStyle" Value="{StaticResource BindsGridColumnHeaderCenteredStyle}" />
        <Setter Property="CellStyle" Value="{StaticResource BindsGridCellStyleWithRowSeparator}" />

        <Setter Property="RowHeaderWidth" Value="0" />
        <Setter Property="SelectionUnit" Value="FullRow" />
        <Setter Property="SelectionMode" Value="Single" />
        <Setter Property="CanUserAddRows" Value="False" />
        <Setter Property="CanUserDeleteRows" Value="False" />
        <Setter Property="CanUserResizeRows" Value="False" />
        <Setter Property="RowHeight" Value="52" />
        <Setter Property="GridLinesVisibility" Value="None" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />
    </Style>

    <!-- ========================= -->
    <!-- Schedule Matrix Headers   -->
    <!-- ========================= -->

    <!-- Базовий стиль хедера колонок матриці -->
    <Style x:Key="ScheduleMatrixColumnHeaderStyleBase" TargetType="DataGridColumnHeader">
        <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
        <Setter Property="Foreground" Value="Black" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="FontFamily" Value="{StaticResource DefaultFontFamily}" />
        <Setter Property="FontSize" Value="14" />
        <Setter Property="Padding" Value="6,0" />
    </Style>

    <!-- Хедер БЕЗ totals (для Availability Edit та інших вʼюх, де TotalHoursText відсутній/не потрібний) -->
    <Style x:Key="ScheduleMatrixColumnHeaderStyleNoTotals"
           TargetType="DataGridColumnHeader"
           BasedOn="{StaticResource ScheduleMatrixColumnHeaderStyleBase}">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <TextBlock Text="{Binding}" TextAlignment="Center" />
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Хедер З totals (використовується там, де у DataContext є TotalHoursText) -->
    <Style x:Key="ScheduleMatrixColumnHeaderStyleWithTotals"
           TargetType="DataGridColumnHeader"
           BasedOn="{StaticResource ScheduleMatrixColumnHeaderStyleBase}">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                        <!-- 1) Header -->
                        <TextBlock Text="{Binding}" TextAlignment="Center" />

                        <!-- 2) Total hours (підпис під імʼям) -->
                        <TextBlock FontSize="11"
                                   Foreground="{StaticResource MutedTextBrush}"
                                   Margin="0,2,0,0"
                                   TextAlignment="Center">
                            <TextBlock.Text>
                                <MultiBinding Converter="{StaticResource ScheduleMatrixEmployeeTotalHoursConverter}">
                                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="DataContext" />
                                    <Binding />
                                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="DataContext.TotalHoursText" />
                                </MultiBinding>
                            </TextBlock.Text>

                            <!-- якщо пусто (не employee колонка) — сховати -->
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Style.Triggers>
                                        <Trigger Property="Text" Value="">
                                            <Setter Property="Visibility" Value="Collapsed" />
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style x:Key="CardListRowStyleBase" TargetType="DataGridRow">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="BorderBrush" Value="#22000000"/>
        <Setter Property="Margin" Value="0,6,0,6"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="DataGridRow">
                    <Border x:Name="RowBorder"
                        Margin="18,0,18,0"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="12"
                        ClipToBounds="False">

                        <Border.Effect>
                            <DropShadowEffect BlurRadius="14" ShadowDepth="2" Opacity="0.18"/>
                        </Border.Effect>

                        <DataGridCellsPresenter/>
                    </Border>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="{DynamicResource AccentBrush}"/>
                            <Setter Property="BorderBrush" Value="{DynamicResource AccentBrush}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>

                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter TargetName="RowBorder" Property="BorderBrush" Value="#40000000"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Schedule-рядок: робимо синім коли чекбокс увімкнений -->
    <Style x:Key="ScheduleCardRowStyle"
       TargetType="DataGridRow"
       BasedOn="{StaticResource CardListRowStyleBase}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsChecked}" Value="True">
                <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                <Setter Property="Foreground" Value="White"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>


    <!-- ===================== -->
    <!-- Card-list Grid (BASE) -->
    <!-- ===================== -->
    <Style x:Key="CardListCardGridStyleBase"
       TargetType="DataGrid"
       BasedOn="{StaticResource AvailabilityBaseGridStyle}">


        <Style.Resources>
            <!-- Імпліцитний стиль для TextBlock тільки в межах цього DataGrid -->
            <Style TargetType="TextBlock">
                <Setter Property="TextTrimming" Value="CharacterEllipsis"/>
                <Setter Property="TextWrapping" Value="NoWrap"/>
                <Setter Property="VerticalAlignment" Value="Center"/>

                <!-- текст вліво -->
                <Setter Property="TextAlignment" Value="Left"/>

                <!-- щоб еліпсис працював стабільно в колонці -->
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
            </Style>

        </Style.Resources>

        <Setter Property="IsReadOnly" Value="True"/>
        <Setter Property="AutoGenerateColumns" Value="False"/>
        <Setter Property="HeadersVisibility" Value="None"/>
        <Setter Property="RowHeaderWidth" Value="0"/>

        <Setter Property="GridLinesVisibility" Value="None"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="0"/>

        <Setter Property="CanUserAddRows" Value="False"/>
        <Setter Property="CanUserDeleteRows" Value="False"/>
        <Setter Property="CanUserResizeRows" Value="False"/>
        <Setter Property="CanUserSortColumns" Value="False"/>

        <!-- Ключ: колонки займають доступну ширину, а не ширину контенту -->
        <Setter Property="ColumnWidth" Value="*"/>
        <Setter Property="MinColumnWidth" Value="0"/>

        <!-- Ключ: прибрати горизонтальний скрол -->
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>

        <!-- Більший текст -->
        <Setter Property="FontFamily" Value="{StaticResource DefaultFontFamily}"/>
        <Setter Property="FontSize" Value="16"/>
        <Setter Property="RowHeight" Value="56"/>



        <Setter Property="CellStyle">
            <Setter.Value>
                <Style TargetType="DataGridCell">
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Background" Value="Transparent"/>

                    <!-- ВІДСТУП ЗЛІВА (і трохи справа, щоб не липло) -->
                    <Setter Property="Padding" Value="22,0,12,0"/>

                    <!-- ГОРИЗОНТАЛЬНО: зліва -->
                    <Setter Property="HorizontalContentAlignment" Value="Left"/>

                    <!-- ВЕРТИКАЛЬНО: по центру -->
                    <Setter Property="VerticalContentAlignment" Value="Center"/>

                    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>

                    <!-- Щоб alignment гарантовано працював для TextBlock/ContentPresenter -->
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="DataGridCell">
                                <Border Background="{TemplateBinding Background}"
                                Padding="{TemplateBinding Padding}">
                                    <ContentPresenter
                                HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>


        <!-- ВАЖЛИВО: inset краще робити margin-ом на Border всередині шаблону -->
        <Setter Property="RowStyle" Value="{StaticResource CardListRowStyleBase}"/>
    </Style>

    <Style x:Key="ScheduleMatrixGridStyle" TargetType="DataGrid" BasedOn="{StaticResource AvailabilityBaseGridStyle}">
        <Setter Property="AutoGenerateColumns" Value="True" />
        <Setter Property="HeadersVisibility" Value="Column" />
        <Setter Property="RowHeaderWidth" Value="0" />
        <Setter Property="SelectionUnit" Value="Cell" />
        <Setter Property="SelectionMode" Value="Single" />
        <Setter Property="CanUserAddRows" Value="False" />
        <Setter Property="CanUserDeleteRows" Value="False" />
        <Setter Property="CanUserResizeRows" Value="False" />
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
        <Setter Property="ColumnWidth" Value="*" />
        <Setter Property="MinColumnWidth" Value="140" />
        <Setter Property="FrozenColumnCount" Value="1" />

        <Setter Property="RowHeight" Value="35" />
        <Setter Property="ColumnHeaderHeight" Value="45" />
        <Setter Property="FontSize" Value="16" />

        <Setter Property="GridLinesVisibility" Value="All" />
        <Setter Property="HorizontalGridLinesBrush" Value="Gainsboro" />
        <Setter Property="VerticalGridLinesBrush" Value="Gainsboro" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="BorderThickness" Value="0" />

        <Setter Property="CellStyle">
            <Setter.Value>
                <Style TargetType="DataGridCell">
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Padding" Value="10,0" />
                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                    <Setter Property="VerticalContentAlignment" Value="Center" />
                </Style>
            </Setter.Value>
        </Setter>

        <!-- Default (WITH totals) -->
        <Setter Property="ColumnHeaderStyle" Value="{StaticResource ScheduleMatrixColumnHeaderStyleWithTotals}" />

        <Setter Property="RowStyle">
            <Setter.Value>
                <Style TargetType="DataGridRow">
                    <Setter Property="Background" Value="{StaticResource SurfaceBrush}" />
                    <Setter Property="HorizontalContentAlignment" Value="Center" />
                    <Setter Property="VerticalContentAlignment" Value="Center" />
                    <Setter Property="SnapsToDevicePixels" Value="True" />

                    <!-- Працює ТІЛЬКИ якщо ItemsSource — DataRowView і в таблиці є колонка IsWeekend -->
                    <Style.Triggers>
                        <DataTrigger Value="True">
                            <DataTrigger.Binding>
                                <Binding Converter="{StaticResource DataRowViewBoolColumnConverter}"
                                     ConverterParameter="IsWeekend"/>
                            </DataTrigger.Binding>
                            <Setter Property="Background" Value="#FFEDEDED" />
                        </DataTrigger>

                    </Style.Triggers>
                </Style>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Та сама матриця, але без totals у заголовках колонок (для Availability Edit) -->
    <Style x:Key="ScheduleMatrixGridStyle_NoTotals"
           TargetType="DataGrid"
           BasedOn="{StaticResource ScheduleMatrixGridStyle}">
        <Setter Property="ColumnHeaderStyle" Value="{StaticResource ScheduleMatrixColumnHeaderStyleNoTotals}" />
    </Style>

    <Style x:Key="ScheduleMatrixCompactGridStyle_NoTotals"
           TargetType="DataGrid"
           BasedOn="{StaticResource ScheduleMatrixGridStyle_NoTotals}">
        <Setter Property="CellStyle" Value="{StaticResource ScheduleMatrixCompactCellStyle}" />
    </Style>

    <Style x:Key="ScheduleMatrixCompactGridStyle" TargetType="DataGrid" BasedOn="{StaticResource ScheduleMatrixGridStyle}">
        <Setter Property="CellStyle" Value="{StaticResource ScheduleMatrixCompactCellStyle}" />
    </Style>

    <Style x:Key="ScheduleMatrixCellStyleBase" TargetType="DataGridCell">
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="BorderBrush" Value="Transparent"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>

        <Setter Property="Background">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource ScheduleMatrixCellBackgroundConverter}"
                          TargetNullValue="Transparent"
                          FallbackValue="Transparent">
                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="DataContext"/>
                    <Binding />
                    <Binding RelativeSource="{RelativeSource Self}" Path="Column.SortMemberPath"/>
                    <Binding RelativeSource="{RelativeSource Self}" Path="Column.Header"/>
                    <!-- ОЦЕ ВАЖЛИВО -->
                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="DataContext.CellStyleRevision"/>
                </MultiBinding>
            </Setter.Value>
        </Setter>

        <Setter Property="Foreground">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource ScheduleMatrixCellForegroundConverter}">
                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="DataContext"/>
                    <Binding />
                    <Binding RelativeSource="{RelativeSource Self}" Path="Column.SortMemberPath"/>
                    <Binding RelativeSource="{RelativeSource Self}" Path="Column.Header"/>
                    <!-- ОЦЕ ВАЖЛИВО -->
                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="DataContext.CellStyleRevision"/>
                </MultiBinding>
            </Setter.Value>
        </Setter>

        <Style.Triggers>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="BorderThickness" Value="2"/>
                <Setter Property="BorderBrush" Value="{DynamicResource AccentBrush}"/>
            </Trigger>
            <Trigger Property="IsKeyboardFocusWithin" Value="True">
                <Setter Property="BorderThickness" Value="2"/>
                <Setter Property="BorderBrush" Value="{DynamicResource AccentBrush}"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="DatabaseQueryResultGridStyle"
       TargetType="DataGrid"
       BasedOn="{StaticResource AvailabilityBaseGridStyle}">

        <Setter Property="AutoGenerateColumns" Value="True"/>
        <Setter Property="IsReadOnly" Value="True"/>
        <Setter Property="HeadersVisibility" Value="Column"/>
        <Setter Property="RowHeaderWidth" Value="0"/>

        <Setter Property="GridLinesVisibility" Value="All"/>
        <Setter Property="HorizontalGridLinesBrush" Value="Gainsboro"/>
        <Setter Property="VerticalGridLinesBrush" Value="Gainsboro"/>

        <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
        <Setter Property="BorderThickness" Value="0"/>

        <Setter Property="RowHeight" Value="35"/>
        <Setter Property="ColumnHeaderHeight" Value="40"/>

        <Setter Property="FontFamily" Value="{StaticResource DefaultFontFamily}"/>
        <Setter Property="FontSize" Value="14"/>

        <Setter Property="SelectionUnit" Value="FullRow"/>
        <Setter Property="SelectionMode" Value="Single"/>

        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>

        <!-- прибираємо "rounded row template" з базового стилю -->
        <Setter Property="RowStyle">
            <Setter.Value>
                <Style TargetType="DataGridRow">
                    <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="{StaticResource AccentBrush}"/>
                            <Setter Property="Foreground" Value="White"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Setter.Value>
        </Setter>

        <Setter Property="CellStyle">
            <Setter.Value>
                <Style TargetType="DataGridCell">
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="Padding" Value="10,0"/>
                    <Setter Property="HorizontalContentAlignment" Value="Left"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                </Style>
            </Setter.Value>
        </Setter>

        <Setter Property="ColumnHeaderStyle">
            <Setter.Value>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Background" Value="{StaticResource SurfaceBrush}"/>
                    <Setter Property="Foreground" Value="Black"/>
                    <Setter Property="BorderThickness" Value="0"/>
                    <Setter Property="HorizontalContentAlignment" Value="Left"/>
                    <Setter Property="VerticalContentAlignment" Value="Center"/>
                    <Setter Property="FontFamily" Value="{StaticResource DefaultFontFamily}"/>
                    <Setter Property="FontSize" Value="13"/>
                    <Setter Property="Padding" Value="10,0"/>
                </Style>
            </Setter.Value>
        </Setter>
    </Style>


    <Style x:Key="ScheduleMatrixCellStyleEditable" TargetType="DataGridCell" BasedOn="{StaticResource ScheduleMatrixCellStyleBase}">
        <Setter Property="IsTabStop" Value="True" />
        <Setter Property="KeyboardNavigation.TabNavigation" Value="Local" />
        <Setter Property="KeyboardNavigation.DirectionalNavigation" Value="Contained" />
        <Setter Property="KeyboardNavigation.ControlTabNavigation" Value="Local" />
    </Style>

    <Style x:Key="MatrixTextBlockStyle" x:Shared="False" TargetType="TextBlock">
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="TextAlignment" Value="Center" />
    </Style>


    <Style x:Key="MatrixCellTextBlockStyle" TargetType="TextBlock">
        <Setter Property="TextAlignment" Value="Center" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="Foreground"
                Value="{Binding RelativeSource={RelativeSource AncestorType=DataGridCell}, Path=Foreground}" />
    </Style>

    <Style x:Key="MatrixCellTextBoxStyle" TargetType="TextBox">
        <Setter Property="TextAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="BorderThickness" Value="0" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="Foreground"
                Value="{Binding RelativeSource={RelativeSource AncestorType=DataGridCell}, Path=Foreground}" />
    </Style>

    <Style x:Key="CenterCheckBoxStyle" TargetType="CheckBox">
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="VerticalAlignment" Value="Center" />
    </Style>

    <Style x:Key="ValidatedDataGridCellStyle" TargetType="DataGridCell">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="True">
                <Setter Property="BorderBrush" Value="{StaticResource ErrorBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Background" Value="{StaticResource ErrorBackgroundBrush}" />
                <Setter Property="ToolTip"
                        Value="{Binding RelativeSource={RelativeSource Self},
                                        Path=(Validation.Errors)[0].ErrorContent}" />
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- ===================== -->
    <!-- Твої ключі стилів     -->
    <!-- ===================== -->
    <Style x:Key="AvailabilityListCardGridStyle"
       TargetType="DataGrid"
       BasedOn="{StaticResource CardListCardGridStyleBase}" />

    <Style x:Key="ContainerListCardGridStyle"
       TargetType="DataGrid"
       BasedOn="{StaticResource CardListCardGridStyleBase}" />

    <Style x:Key="ScheduleCardGridStyle"
       TargetType="DataGrid"
       BasedOn="{StaticResource CardListCardGridStyleBase}">
        <Setter Property="RowHeight" Value="54"/>
        <Setter Property="RowStyle" Value="{StaticResource ScheduleCardRowStyle}"/>
    </Style>


    <Style x:Key="ShopListCardGridStyle"
       TargetType="DataGrid"
       BasedOn="{StaticResource CardListCardGridStyleBase}" />

    <Style x:Key="EmployeeListCardGridStyle"
       TargetType="DataGrid"
       BasedOn="{StaticResource CardListCardGridStyleBase}">
        <!-- Якщо у Employees хочеш ще більший текст -->
        <Setter Property="FontSize" Value="17"/>
    </Style>

    <Style x:Key="MultiOpenRowCheckBoxStyle" TargetType="CheckBox">
        <Setter Property="Focusable" Value="False"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="VerticalAlignment" Value="Center"/>

        <!-- ВІДСТУП від лівого краю картки -->
        <Setter Property="Margin" Value="12,0,8,0"/>

        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="#60000000"/>
        <Setter Property="Foreground" Value="Black"/>

        <!-- Показувати тільки коли MultiOpen увімкнений -->
        <Setter Property="Visibility">
            <Setter.Value>
                <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}"
                     Path="DataContext.IsMultiOpenEnabled"
                     Converter="{StaticResource BoolToVis}"/>
            </Setter.Value>
        </Setter>

        <!-- Простий template, щоб BorderBrush реально впливав на рамку -->
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="CheckBox">
                    <Grid VerticalAlignment="Center">
                        <Border x:Name="Box"
                            Width="16" Height="16"
                            CornerRadius="3"
                            BorderThickness="1"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            Background="{TemplateBinding Background}"/>
                        <Path x:Name="Check"
                          Data="M 3 8 L 7 12 L 13 4"
                          Stroke="{TemplateBinding Foreground}"
                          StrokeThickness="2"
                          Visibility="Collapsed"
                          StrokeStartLineCap="Round"
                          StrokeEndLineCap="Round"/>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="True">
                            <Setter TargetName="Check" Property="Visibility" Value="Visible"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="Box" Property="Opacity" Value="0.5"/>
                            <Setter TargetName="Check" Property="Opacity" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>

        <Style.Triggers>
            <!-- Коли рядок помічений чекбоксом -->
            <DataTrigger Binding="{Binding IsChecked}" Value="True">
                <Setter Property="BorderBrush" Value="White"/>
                <Setter Property="Foreground" Value="White"/>
            </DataTrigger>

            <!-- Коли рядок Selected (якщо ти фарбуєш selected в синій) -->
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Path=IsSelected}" Value="True">
                <Setter Property="BorderBrush" Value="White"/>
                <Setter Property="Foreground" Value="White"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <Style x:Key="CardListCheckBoxCellStyle" TargetType="DataGridCell">
        <Setter Property="Padding" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="HorizontalContentAlignment" Value="Left"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
    </Style>

    <!-- converter для "hours line" в header -->
    <conv:EmployeeTotalHoursHeaderConverter x:Key="EmpTotalHeaderConverter"/>

    <!-- Спільний дворядковий header для schedule matrix (Edit + Profile) -->
    <Style x:Key="ScheduleMatrixTwoLineHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="MinHeight" Value="56"/>
        <Setter Property="Padding" Value="6,8"/>

        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" Margin="0,2" HorizontalAlignment="Center">
                        <TextBlock Text="{Binding}"
                               TextAlignment="Center"
                               FontWeight="SemiBold"
                               TextWrapping="NoWrap"
                               TextTrimming="CharacterEllipsis"/>

                        <TextBlock x:Name="HoursLine"
                               FontSize="11"
                               Foreground="{StaticResource MutedTextBrush}"
                               TextAlignment="Center">
                            <TextBlock.Text>
                                <MultiBinding Converter="{StaticResource EmpTotalHeaderConverter}">
                                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="DataContext"/>
                                    <Binding RelativeSource="{RelativeSource AncestorType=DataGridColumnHeader}" Path="Column.SortMemberPath"/>
                                    <Binding RelativeSource="{RelativeSource AncestorType=DataGrid}" Path="DataContext.TotalHoursText"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                    </StackPanel>

                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding ElementName=HoursLine, Path=Text}" Value="">
                            <Setter TargetName="HoursLine" Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>



</ResourceDictionary>

